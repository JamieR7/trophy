<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IB Sports MCQ Quiz</title>
    <style>
        :root {
            --color-primary: #004587;
            --color-primary-hover: #003570;
            --color-primary-active: #002a5a;
            --color-success: #fbba07;
            --color-error: #e73037;
            --color-warning: #F59E0B;
            --color-bg: #F8FAFB;
            --color-surface: #FFFFFF;
            --color-text: #1F2937;
            --color-text-secondary: #6B7280;
            --color-border: #E5E7EB;
            --radius-base: 8px;
            --radius-lg: 12px;
            --spacing-8: 8px;
            --spacing-12: 12px;
            --spacing-16: 16px;
            --spacing-24: 24px;
            --spacing-32: 32px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: var(--spacing-16);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 700px;
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: var(--spacing-32);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-24);
            border-bottom: 2px solid var(--color-border);
            padding-bottom: var(--spacing-16);
        }

        .header h1 {
            margin: 0;
            font-size: 28px;
            color: var(--color-text);
        }

        .stats {
            display: flex;
            gap: var(--spacing-16);
            font-size: 14px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            color: var(--color-text-secondary);
            font-size: 12px;
            margin-bottom: var(--spacing-8);
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--color-primary);
        }

        .stat-value.streak {
            color: var(--color-success);
        }

        .question-container {
            margin-bottom: var(--spacing-24);
        }

        .question-number {
            color: var(--color-text-secondary);
            font-size: 14px;
            margin-bottom: var(--spacing-8);
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--spacing-16);
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-12);
        }

        .option {
            padding: var(--spacing-12) var(--spacing-16);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-base);
            background: var(--color-surface);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            text-align: left;
            color: var(--color-text);
        }

        .option:hover {
            border-color: var(--color-primary);
            background: #F0FFFE;
        }

        .option.selected {
            border-color: var(--color-primary);
            background: #E0FFFE;
            font-weight: 600;
        }

        .option.correct {
            border-color: var(--color-success);
            background: #DCFCE7;
            color: #166534;
        }

        .option.incorrect {
            border-color: var(--color-error);
            background: #FEE2E2;
            color: #991B1B;
        }

        .feedback {
            margin-top: var(--spacing-16);
            padding: var(--spacing-12) var(--spacing-16);
            border-radius: var(--radius-base);
            font-size: 14px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #DCFCE7;
            color: #166534;
            border-left: 4px solid var(--color-success);
        }

        .feedback.incorrect {
            background: #FEE2E2;
            color: #991B1B;
            border-left: 4px solid var(--color-error);
        }

        .button-group {
            display: flex;
            gap: var(--spacing-12);
            margin-top: var(--spacing-24);
        }

        .btn {
            flex: 1;
            padding: var(--spacing-12) var(--spacing-16);
            border: none;
            border-radius: var(--radius-base);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
        }

        .btn-primary:disabled {
            background: #D1D5DB;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--color-border);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: #D1D5DB;
        }

        .streak-milestone {
            background: linear-gradient(135deg, #fbba07 0%, #e73037 100%);
            border: 2px solid #004587;
            padding: var(--spacing-24);
            border-radius: var(--radius-lg);
            text-align: center;
            margin-bottom: var(--spacing-24);
        }

        .milestone-icon {
            font-size: 48px;
            margin-bottom: var(--spacing-12);
        }

        .milestone-text {
            font-size: 20px;
            font-weight: bold;
            color: #78350F;
            margin-bottom: var(--spacing-8);
        }

        .download-section {
            background: #EFF6FF;
            border: 2px solid #0EA5E9;
            padding: var(--spacing-16);
            border-radius: var(--radius-base);
            margin-top: var(--spacing-16);
        }

        .progress-bar {
            width: 100%;
            margin: var(--spacing-24) 0;
            padding: var(--spacing-16);
            background: #F3F4F6;
            border-radius: var(--radius-lg);
        }

        .progress-track {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--spacing-8);
            margin-bottom: var(--spacing-12);
        }

        .trophy-card {
            aspect-ratio: 3/4;
            border-radius: var(--radius-base);
            border: 2px solid #E5E7EB;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            position: relative;
            overflow: hidden;
            padding: var(--spacing-8);
        }

        .trophy-card:hover:not(.locked) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .trophy-card.unlocked {
            background: linear-gradient(135deg, #fbba07 0%, #e73037 100%);
            border-color: #004587;
            box-shadow: 0 4px 12px rgba(0, 69, 135, 0.3);
        }

        .trophy-card.current {
            border: 3px solid #004587;
            box-shadow: 0 0 12px rgba(0, 69, 135, 0.6);
        }

        .trophy-card.locked {
            background: #E5E7EB;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .trophy-emoji {
            font-size: 28px;
            margin-bottom: var(--spacing-8);
        }

        .trophy-label {
            font-size: 11px;
            font-weight: 700;
            color: #1F2937;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .trophy-card.unlocked .trophy-label {
            background: rgba(255, 255, 255, 0.95);
            color: #004587;
        }

        .milestone-info {
            font-size: 12px;
            color: #6B7280;
            text-align: center;
        }

        .download-section h3 {
            margin: 0 0 var(--spacing-12) 0;
            color: #0369A1;
            font-size: 16px;
        }

        .download-buttons {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-8);
        }

        .btn-download {
            padding: var(--spacing-10) var(--spacing-16);
            background: #fbba07;
            color: #004587;
            border: 2px solid #004587;
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
            text-decoration: none;
            text-align: center;
            display: inline-block;
        }

        .btn-download:hover {
            background: #e73037;
            color: white;
        }

        .finish-screen {
            text-align: center;
        }

        .finish-screen h2 {
            font-size: 24px;
            color: var(--color-text);
            margin-bottom: var(--spacing-12);
        }

        .score-display {
            font-size: 36px;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: var(--spacing-24);
        }

        @media (max-width: 600px) {
            .container {
                padding: var(--spacing-16);
            }

            .header {
                flex-direction: column;
                gap: var(--spacing-16);
            }

            .button-group {
                flex-direction: column-reverse;
            }

            .stats {
                justify-content: center;
            }

            .progress-track {
                grid-template-columns: repeat(6, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>IB Sports MCQ</h1>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Correct</div>
                    <div class="stat-value" id="correct-count">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Streak</div>
                    <div class="stat-value streak" id="streak-count">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Total</div>
                    <div class="stat-value" id="total-count">0</div>
                </div>
            </div>
        </div>

        <div id="quiz-content">
            <div class="question-container">
                <div class="question-number">Loading...</div>
                <div class="question-text">Initializing quiz...</div>
            </div>
        </div>
    </div>

    <!-- Load questions from external file -->
    <script src="questions.js"></script>

    <script>
        const GITHUB_USERNAME = 'JamieR7';
        const GITHUB_REPO = 'trophy';

        let currentQuestionIndex = 0;
        let shuffledQuestions = [];
        let correct = 0;
        let total = 0;
        let streak = 0;
        let answered = false;
        let selectedAnswer = -1;
        const trophySequence = [
            { streak: 1, name: 'FIFA World Cup', file: 'FIFA.png', emoji: '‚öΩ' },
            { streak: 3, name: 'Calcutta Cup', file: 'Calcutta_Cup.png', emoji: 'üèâ' },
            { streak: 5, name: 'FIVB World', file: 'FIVB.png', emoji: 'üèê' },
            { streak: 7, name: 'The Ashes', file: 'The_Ashes.png', emoji: 'üèè' },
            { streak: 10, name: 'Snooker', file: 'Snooker.png', emoji: 'üé±' },
            { streak: 13, name: 'Americas Cup', file: 'Americas_cup.png', emoji: '‚õµ' },
            { streak: 17, name: 'Larry O\'Brien', file: 'Larry_OBrien.png', emoji: 'üèÄ' },
            { streak: 21, name: 'Davis Cup', file: 'Davis_Cup.png', emoji: 'üéæ' },
            { streak: 25, name: 'Ryder Cup', file: 'Ryder_Cup.png', emoji: '‚õ≥' },
            { streak: 30, name: 'Venus Rosewater', file: 'Venus_Rosewater.png', emoji: 'üéæ' },
            { streak: 35, name: 'Olympic Gold', file: 'Olympic_gold.png', emoji: 'ü•á' },
            { streak: 40, name: 'Yellow Jersey', file: 'Yellow_jersey.png', emoji: 'üö¥' }
        ];

        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function initializeQuiz() {
            shuffledQuestions = shuffleArray(allQuestions);
            currentQuestionIndex = 0;
            correct = 0;
            total = 0;
            streak = 0;
            updateStats();
            loadQuestion();
        }

        function createProgressBar() {
            let html = '<div class="progress-bar"><div class="progress-track">';
            
            trophySequence.forEach((trophy) => {
                let cardClass = 'trophy-card locked';
                
                if (streak >= trophy.streak) {
                    cardClass = 'trophy-card unlocked';
                }
                
                html += `<div class="${cardClass}" title="${trophy.name}">
                    <div class="trophy-emoji">${trophy.emoji}</div>
                    <div class="trophy-label">${trophy.streak}</div>
                </div>`;
            });
            
            html += '</div><div class="milestone-info">Progress: ';
            const unlockedCount = trophySequence.filter(t => streak >= t.streak).length;
            html += `${unlockedCount} of ${trophySequence.length} trophies unlocked</div></div>`;
            
            return html;
        }

        function loadQuestion() {
            if (currentQuestionIndex >= shuffledQuestions.length) {
                showFinishScreen();
                return;
            }

            answered = false;
            selectedAnswer = -1;
            const q = shuffledQuestions[currentQuestionIndex];

            let html = createProgressBar();
            
            html += `
                <div class="question-container">
                    <div class="question-number">Question ${currentQuestionIndex + 1} of ${shuffledQuestions.length}</div>
                    <div class="question-text">${q.q}</div>
                    <div class="options">
            `;

            q.options.forEach((opt, idx) => {
                html += `<div class="option" onclick="selectAnswer(${idx})">${String.fromCharCode(65 + idx)}. ${opt}</div>`;
            });

            html += `
                    </div>
                    <div class="feedback"></div>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="submitAnswer()">Submit</button>
                        <button class="btn btn-secondary" onclick="nextQuestion()" style="display: none;" id="next-btn">Next Question</button>
                    </div>
                </div>
            `;

            document.getElementById('quiz-content').innerHTML = html;
        }

        function selectAnswer(idx) {
            if (answered) return;
            selectedAnswer = idx;
            const options = document.querySelectorAll('.option');
            options.forEach((opt, i) => {
                opt.classList.toggle('selected', i === idx);
            });
        }

        function submitAnswer() {
            if (selectedAnswer === -1) return;

            answered = true;
            const q = shuffledQuestions[currentQuestionIndex];
            const isCorrect = selectedAnswer === q.answer;

            const options = document.querySelectorAll('.option');
            options.forEach((opt, i) => {
                opt.style.pointerEvents = 'none';
                if (i === q.answer) {
                    opt.classList.add('correct');
                } else if (i === selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                correct++;
                streak++;
                document.querySelector('.feedback').textContent = '‚úì Correct!';
                document.querySelector('.feedback').classList.add('show', 'correct');
            } else {
                streak = 0;
                document.querySelector('.feedback').textContent = '‚úó Incorrect. The correct answer is ' + String.fromCharCode(65 + q.answer);
                document.querySelector('.feedback').classList.add('show', 'incorrect');
            }

            total++;
            updateStats();
            document.getElementById('next-btn').style.display = 'block';
            document.querySelector('.btn-primary').style.display = 'none';
        }

        function nextQuestion() {
            const milestoneStreaks = [1, 3, 5, 7, 10, 13, 17, 21, 25, 30, 35, 40];
            if (milestoneStreaks.includes(streak)) {
                showStreakMilestone();
            } else {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function updateStats() {
            document.getElementById('correct-count').textContent = correct;
            document.getElementById('streak-count').textContent = streak;
            document.getElementById('total-count').textContent = total;
        }

        function showStreakMilestone() {
            const currentTrophy = trophySequence.find(t => t.streak === streak);
            const downloadUrl = `https://github.com/${GITHUB_USERNAME}/${GITHUB_REPO}/raw/main/Trophys/${currentTrophy.file}`;
            
            let downloadHTML = `<a href="${downloadUrl}" class="btn-download" download="${currentTrophy.file}" target="_blank">‚¨áÔ∏è Download ${currentTrophy.name}</a>`;

            const progressHTML = createProgressBar();

            const html = `
                <div class="streak-milestone">
                    <div class="milestone-icon">${currentTrophy.emoji}</div>
                    <div class="milestone-text">Streak of ${streak}!</div>
                    <p style="margin: 0; color: #1F2937; font-size: 14px;">You've unlocked: <strong>${currentTrophy.name}</strong></p>
                    ${progressHTML}
                    <div class="download-section">
                        <h3>üèÜ Download Your Trophy</h3>
                        ${downloadHTML}
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="continueLearning()">Continue Quiz</button>
                        <button class="btn btn-secondary" onclick="location.reload()">Start Over</button>
                    </div>
                </div>
            `;
            document.getElementById('quiz-content').innerHTML = html;
        }

        function continueLearning() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function showFinishScreen() {
            const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;
            const progressHTML = createProgressBar();
            const html = `
                ${progressHTML}
                <div class="finish-screen">
                    <h2>Quiz Complete!</h2>
                    <div class="score-display">${correct} / ${total}</div>
                    <p style="color: var(--color-text-secondary); font-size: 18px; margin-bottom: var(--spacing-24);">You scored ${percentage}%</p>
                    <button class="btn btn-primary" onclick="location.reload()">Start Over</button>
                </div>
            `;
            document.getElementById('quiz-content').innerHTML = html;
        }

        // Initialize on page load
        window.addEventListener('load', initializeQuiz);
    </script>
</body>
</html>
